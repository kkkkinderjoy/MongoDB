<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/index.css">
</head>
<body>
    <%- include('nav.ejs') %>
    <!-- 코드를 그대로 보여주는것 ? = /코드를 렌더링 하는것? -  -->
    <!-- <p class="text-center bg-slate-300 text-blue-500">Lorem ipsum dolor sit amet.</p> -->
    <!-- ejs 파일에서는 반복문을 for문을 씀  -->
    <!--  데이터를 그대로 보여줄려면? = 사용 /자바스크립트 문법? %만 사용 / html이 rendering 될려고 하면? - 사용 -->
    <% for(let i = 0; i < data.length; i++){ %>
        <ul class="flex justify-between items-center border text-center">
            <li class="basis-1/3"><a href="/view/<%= data[i]._id %>"><%= data[i].title %></a></li>
            <li class="basis-1/3"><%= data[i].content %></li>
            <li class="basis-1/3 flex">
                <div><a href="/edit/<%= data[i]._id %>">✏</a></div>
                <div><a href="javascript:deleteFun('<%=data[i]._id %>')">🗑</a></div>
                <!-- 작은 따옴표를 넣는 이유는? 문자열로 데이터가 넘어와야 하니깐 -->
                <!-- /delete/<%=data[i]._id %> -->
                <!-- javascript ? html에서 js 함수를 실행하려고 할때 쓰는 문법임 -->
            </li>
        </ul>
    <% } %>
    <button class="bg-orange-300 rounded-md w-25 h-8 p-5 flex items-center mt-[15px]"><a href="/write">글쓰기</a></button>
    <!-- <%= JSON.stringify(data) %> -->
    <script>
        function deleteFun(data){
            let confirmChk = confirm("정말 삭제 하시겠습니까?")
            console.log(data) 
            console.log(confirmChk) //true or false (확인 or 취소니깐)

            if(confirmChk){
                // console.log("확인 누름")
                window.location.href= '/delete/'+data
                //위에 코드는 현재 주소를 이동한다는 의미임
            }
        }
    </script>
</body>
</html>